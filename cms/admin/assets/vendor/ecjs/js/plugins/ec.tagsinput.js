/*! EC.js - v0.1.0 - 2013-05-15
* Copyright (c) 2013 Emilio Cobos Álvarez; Licensed MIT */
(function(e,t){"use strict";var n=function(e,n){var o=this,i="keypress";e||(e={}),e=t.core.extend({placeholder:"Escribe aquí..."},e),n.style.display="none",o.originalElement=n,o._tags=[],o.parent=t.DOM.create("div",{className:"ec-tagsinput-wrapper"}),o.replacedElement=t.DOM.create("input",{value:o.originalElement.value,type:"text",placeholder:e.placeholder,className:"ec-tagsinput-input"}),"oninput"in o.originalElement&&(i="input"),o.replacedElement.on(i,function(){o.parseValue(this.value)}),o.replacedElement.on("blur",function(){o.parseValue(this.value+",")}),o.parent.append(o.replacedElement).on("click",".ec-tagsinput-close",function(e){for(var n=o._tags,i=this.parentNode.getAttribute("data-value"),r=0;n.length>r;r++)n[r]===i&&(n.splice(r,1),r--);o._tags=n,o.originalElement.value=n.join(","),e.preventDefault(),t.DOM.select(this.parentNode).remove()}),t.DOM.select(o.originalElement).before(o.parent),o.parseValue(o.originalElement.value||o.originalElement.getAttribute("value"))};n.prototype.parseValue=function(e){var n=e||this.replacedElement.get(0).value,o=n.split(","),i="",r="",a=0;if(!(2>o.length)){for(;o.length>a;a++)o[a]||(o.splice(a,1),a--);o.length&&(t.core.forEach(o,function(e){r+='<span class="ec-tagsinput-tag" data-value="'+e+'">'+e+'<a href="#" class="ec-tagsinput-close">&times;</a></span>'}),this.replacedElement.before(r),this._tags=this._tags.concat(o),this.originalElement.value=this._tags.join(","),this.replacedElement.get(0).value=i)}},t.require("DOM",function(){t.DOMInstance.prototype.tagsInput=function(e){return this.forEach(function(t){t._tagInputInstance=new n(e,t)})}}),t.plugins.register("tagsInput")})(window,window.EC);